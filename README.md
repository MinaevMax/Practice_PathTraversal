# Practice_PathTraversal

## Краткое описание уязвимости
Path Traversal (Обход пути) — это уязвимость, позволяющая злоумышленнику получать доступ к файлам или директориям за пределами корневой папки веб-приложения. Она возникает, когда приложение некорректно обрабатывает пользовательский ввод, связанный с путями к файлам, например, параметры URL, заголовки или данные форм.
Данный сервис позволяет получить все штрафы пользователя по имени человека, добавить новый штраф и посмотреть статистику данных.


## Способы защиты от уязвимости
- Валидация и экранирование ввода
- Нормализация путей
- Проверка префикса

## Запуск приложения
Для запуска приложения нужно:
1. Склонировать репозиторий:
```bash
git clone https://github.com/MinaevMax/Practice_PathTraversal.git
cd Practice_PathTraversal/
```
2. Запуск приложения через docker-compose:
```bash
docker-compose up --build
```
3. Приложение будет запущено по адресу: [http://localhost:8080](http://localhost:8080)

## Описание уязвимости конкретно в данном приложении
Флаг находится в файле admin.txt, лежащем в папке admin, которая лежит в корне, вместе с папкой bills, которая хранит данные о штрафах пользователей.
Есть хэндлер, позволяющий получить штрафы по имени; хэндлер, позволяющий добавить штраф с полями имя и размер; хэндлер, позволяющий получить количество записей в хранилище. Для того, чтобы получить флаг, нужно передать вместо имени путь ../admin, таким образом программа посчитает папку с флагом папкой со штрафами пользователя.

## POC-эксплоит для получения флага
Для получения флага необходимо получить файл admin.txt из папки admin, лежащей в корне приложения. 

Для начала проверим доступный нам функционал. Увидим, что мы можем запрашивать все штрафы пользователя по имени, добавлять штраф и проверять количество записей. Попробуем запросить содержимое папки admin, но функционал позволяет нам исследовать содержимое только директории bills. Значит, нам нужно покинуть ее и перейти в директорию admin. Для этого попробуем вместо имени записать:
```
../admin
```
Тем самым, мы покинем директорию bills и перейдем в директорию admin, а функционал сервиса выведет нам все тестовые файлы из нее.

Выполнение запросов лучше и удобнее всего проводить через любой удобный для Вас браузер.